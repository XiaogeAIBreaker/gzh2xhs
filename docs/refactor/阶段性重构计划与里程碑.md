# 分阶段重构计划与里程碑（M1–M5）

## 组织与治理

- RACI 明确；每周例会与风险清单更新；阶段评审与验收门槛公开。

## 里程碑与交付

- M0：评估与基线（已完成）
    - 交付：`技术评估报告.md`、`基线度量.md`、`安全审计与风险清单.md`、`docs/deps.json`。
- M1：架构固化与边界
    - 目标：组件容器化与逻辑下沉；统一 hooks→usecases→controllers 调用链；修复跨层耦合。
    - 验收：依赖健康检查通过；领域层无 UI 依赖；API 契约稳定、版本文档完成。
- M2：安全与自主可控
    - 目标：生产 CSP 精简；RBAC 动作清单复核；供应链安全（SCA 报告、内部镜像）；限流/幂等 Redis 一致性。
    - 验收：OWASP Top 10 零高危；SCA 零高危；灰度方案与回滚预案演练完成。
- M3：性能与资源效率
    - 目标：路由级拆分、Tailwind tree-shaking、图片优化；缓存策略与 TTL 梳理；指标告警与 SLO。
    - 验收：核心 API P95≤200ms、错误率≤0.1%；Lighthouse ≥90；资源占用稳定。
- M4：测试体系完善
    - 目标：单元/集成/压力/安全测试完善；契约测试覆盖所有 API 路由。
    - 验收：覆盖率达阈值；容量报告与瓶颈清单；安全扫描通过。
- M5：专家评审与运维交付
    - 目标：专家组技术/性能/安全综合评审；操作手册与回滚预案完善。
    - 验收：评审意见闭环；运维值班与报警策略就绪。

## 发布与稳定性策略

- 灰度/蓝绿：按路由与功能模块逐步放量；保留旧契约至新版本稳定。
- 回滚：一键脚本与演练；错误预算与门槛定义。
